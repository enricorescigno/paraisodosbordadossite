
<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
    
    <!-- Cabeçalhos de cache e CDN -->
    <meta http-equiv="Cache-Control" content="max-age=86400, must-revalidate">
    <meta http-equiv="Expires" content="1d">
    
    <!-- Google Fonts: Preconnect & Preload para Desempenho -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Exemplo Playfair Display (troque/adicione suas fontes aqui) -->
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" onload="this.rel='stylesheet'">
    <noscript>
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap">
    </noscript>
    <!-- Adicione font-display:swap nas suas regras CSS para melhor performance -->
    
    <!-- HTML Meta Tags -->
    <title>Paraíso dos Bordados - Artigos Personalizados de Alta Qualidade</title>
    <meta name="description" content="Bordados personalizados para sua casa, mesa, vestuário e acessórios. Confira nosso catálogo de produtos e peças exclusivas com qualidade superior.">
  
    <!-- Facebook Meta Tags -->
    <meta property="og:url" content="https://paraisodosbordados.com.br">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Paraíso dos Bordados - Artigos Personalizados de Alta Qualidade">
    <meta property="og:description" content="Bordados personalizados para sua casa, mesa, vestuário e acessórios. Confira nosso catálogo de produtos e peças exclusivas com qualidade superior.">
    <meta property="og:image" content="https://opengraph.b-cdn.net/production/images/a4b00277-77ba-4c2d-b809-057144deb998.png?token=K3Xo5fFb2QKWVae9jgSCWH9ONWSbUhrYzJFID0b1x3s&height=639&width=634&expires=33285092297">
  
    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="paraisodosbordados.com.br">
    <meta property="twitter:url" content="https://paraisodosbordados.com.br">
    <meta name="twitter:title" content="Paraíso dos Bordados - Artigos Personalizados de Alta Qualidade">
    <meta name="twitter:description" content="Bordados personalizados para sua casa, mesa, vestuário e acessórios. Confira nosso catálogo de produtos e peças exclusivas com qualidade superior.">
    <meta name="twitter:image" content="https://opengraph.b-cdn.net/production/images/a4b00277-77ba-4c2d-b809-057144deb998.png?token=K3Xo5fFb2QKWVae9jgSCWH9ONWSbUhrYzJFID0b1x3s&height=639&width=634&expires=33285092297">

    <!-- Meta Tags Generated via https://www.opengraph.xyz -->
    
    <!-- Additional meta tags -->
    <meta name="keywords" content="bordados, jogos americanos, toalhas bordadas, personalizados, artigos de mesa, toalhas, bordados personalizados">
    <meta name="author" content="Paraíso dos Bordados">
    <meta name="theme-color" content="#E30613">
    <meta name="robots" content="index, follow">
    <meta name="application-name" content="Paraíso dos Bordados">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Paraíso dos Bordados">
    <meta name="format-detection" content="telephone=no">
    
    <!-- CDN e Preconnects avançados -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Quando tiver CDN, adicione aqui -->
    <!-- <link rel="preconnect" href="https://cdn.paraisodosbordados.com.br" crossorigin> -->
    
    <!-- DNS prefetch para domínios externos -->
    <link rel="dns-prefetch" href="https://wa.me" />
    
    <!-- Preload de recursos críticos -->
    <link rel="preload" href="/src/index.css" as="style">
    <link rel="preload" as="image" href="/lovable-uploads/1b6b8029-a368-4270-a444-57d4aab3676e.png" fetchpriority="high" />
    
    <!-- Preload de módulos críticos JavaScript -->
    <link rel="modulepreload" href="/src/main.tsx">
    
    <!-- Lovable script tag - required for select functionality -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Deferred non-critical scripts -->
    <script type="module" defer>
      // Configuração mais avançada do service worker
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', async () => {
          try {
            const registration = await navigator.serviceWorker.register('/sw.js', {
              scope: '/'
            });
            
            // Verificar atualizações do service worker periodicamente
            setInterval(() => {
              registration.update();
            }, 1000 * 60 * 60); // Verificar a cada hora
            
            // Configurar sincronização em segundo plano
            if ('SyncManager' in window) {
              registration.sync.register('sync-data');
            }
            
            // Configurar sincronização periódica (se suportado)
            if ('periodicSync' in registration) {
              try {
                await registration.periodicSync.register('update-content', {
                  minInterval: 24 * 60 * 60 * 1000, // Uma vez por dia
                });
              } catch (error) {
                console.log('Periodic sync could not be registered:', error);
              }
            }
            
            console.log('Service Worker registrado com sucesso:', registration.scope);
          } catch (error) {
            console.error('Falha no registro do Service Worker:', error);
          }
        });
        
        // Lidar com atualizações do service worker
        let refreshing = false;
        navigator.serviceWorker.addEventListener('controllerchange', () => {
          if (refreshing) return;
          refreshing = true;
          window.location.reload();
        });
      }
      
      // Implementar cache local com IndexedDB para dados frequentes
      const initLocalCache = async () => {
        if (!('indexedDB' in window)) return;
        
        try {
          const dbName = 'paraisoBordadosCache';
          const request = indexedDB.open(dbName, 1);
          
          request.onupgradeneeded = (event) => {
            const db = event.target.result;
            
            // Criar stores para diferentes tipos de dados
            if (!db.objectStoreNames.contains('products')) {
              db.createObjectStore('products', { keyPath: 'id' });
            }
            
            if (!db.objectStoreNames.contains('categories')) {
              db.createObjectStore('categories', { keyPath: 'id' });
            }
            
            if (!db.objectStoreNames.contains('settings')) {
              db.createObjectStore('settings', { keyPath: 'key' });
            }
          };
          
          request.onsuccess = (event) => {
            console.log('IndexedDB inicializado com sucesso');
            // Aqui você pode adicionar lógica para pré-carregar dados importantes
          };
          
          request.onerror = (event) => {
            console.error('Erro ao inicializar IndexedDB:', event.target.error);
          };
        } catch (error) {
          console.error('Erro ao configurar cache local:', error);
        }
      };
      
      // Iniciar cache local
      initLocalCache();
      
      // Adicionar analytics de forma otimizada
      const addAnalytics = () => {
        if (window.location.hostname !== 'localhost') {
          // Implementação futura de analytics
          // Usando requestIdleCallback para não afetar performance
          if ('requestIdleCallback' in window) {
            window.requestIdleCallback(() => {
              // Código de analytics aqui
            }, { timeout: 5000 });
          } else {
            setTimeout(() => {
              // Fallback para browsers sem requestIdleCallback
              // Código de analytics aqui
            }, 5000);
          }
        }
      };
      
      // Adicionar analytics com baixa prioridade
      addAnalytics();
      
      // Monitor de performance
      if ('performance' in window && 'PerformanceObserver' in window) {
        // Monitorar Web Vitals
        const observer = new PerformanceObserver((list) => {
          for (const entry of list.getEntries()) {
            // Registrar métricas importantes
            console.log(`[Performance] ${entry.name}: ${entry.startTime.toFixed(0)}ms`);
          }
        });
        
        // Observar métricas de performance diferentes
        observer.observe({ entryTypes: ['largest-contentful-paint', 'first-input', 'layout-shift'] });
      }
    </script>
  </body>
</html>
